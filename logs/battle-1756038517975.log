[2025-08-24T12:28:37.977Z] [INFO] Starting test
[2025-08-24T12:28:37.978Z] [INFO] Spawning: npx tsx src/cli.ts --entry test/fixtures/browser.ts --target browser --global-name MyLib --out-dir tmp/browser-build --clean
[2025-08-24T12:28:40.751Z] [OUTPUT] [36mBuilding...[39m

[2025-08-24T12:28:40.759Z] [INFO] Pattern matched: Building...
[2025-08-24T12:28:40.779Z] [OUTPUT] [34mCLI[39m Building entry: test/fixtures/browser.ts

[2025-08-24T12:28:40.781Z] [OUTPUT] [34mCLI[39m Using tsconfig: tsconfig.json

[2025-08-24T12:28:40.781Z] [OUTPUT] [34mCLI[39m tsup v8.5.0

[2025-08-24T12:28:40.788Z] [OUTPUT] [34mCLI[39m Target: es2022

[2025-08-24T12:28:40.791Z] [OUTPUT] [34mCJS[39m Build start

[2025-08-24T12:28:40.792Z] [OUTPUT] [34mESM[39m Build start

[2025-08-24T12:28:40.945Z] [OUTPUT] [32mESM[39m [1mtmp/browser-build/browser.js     [22m[32m443.00 B[39m
[32mESM[39m [1mtmp/browser-build/browser.js.map [22m[32m923.00 B[39m

[2025-08-24T12:28:40.946Z] [OUTPUT] [32mESM[39m ‚ö°Ô∏è Build success in 153ms

[2025-08-24T12:28:40.946Z] [OUTPUT] [32mCJS[39m [1mtmp/browser-build/browser.cjs     [22m[32m485.00 B[39m
[32mCJS[39m [1mtmp/browser-build/browser.cjs.map [22m[32m926.00 B[39m
[32mCJS[39m ‚ö°Ô∏è Build success in 155ms

[2025-08-24T12:28:42.445Z] [OUTPUT] [34mDTS[39m Build start

[2025-08-24T12:28:43.719Z] [OUTPUT] error TS6059: File '/home/x/Projects/builder/test/fixtures/browser.ts' is not under 'rootDir' 'src'. 'rootDir' is expected to contain all source files.
  The file is in the program because:
    Root file specified for compilation
  File is ECMAScript module because '/home/x/Projects/builder/package.json' has field "type" with value "module"
test/fixtures/browser.ts(2,38): error TS2304: Cannot find name 'HTMLElement'.
test/fixtures/browser.ts(3,12): error TS2584: Cannot find name 'document'. Do you need to change your target library? Try changing the 'lib' compiler option to include 'dom'.
test/fixtures/browser.ts(6,43): error TS2304: Cannot find name 'Element'.
test/fixtures/browser.ts(7,12): error TS2584: Cannot find name 'document'. Do you need to change your target library? Try changing the 'lib' compiler option to include 'dom'.
test/fixtures/browser.ts(12,7): error TS2584: Cannot find name 'document'. Do you need to change your target library? Try changing the 'lib' compiler option to include 'dom'.
test/fixtures/browser.ts(15,5): error TS2584: Cannot find name 'document'. Do you need to change your target library? Try changing the 'lib' compiler option to include 'dom'.


[2025-08-24T12:28:43.722Z] [OUTPUT] [31m‚úó Build failed in 2964ms[39m

[2025-08-24T12:28:43.722Z] [OUTPUT] [31merror occurred in dts build[39m

[2025-08-24T12:28:43.862Z] [INFO] Process exited with code: 1
[2025-08-24T12:28:50.778Z] [ERROR] Expected pattern not found after 10000ms: ‚úì Build completed
[2025-08-24T12:28:50.782Z] [INFO] Screenshot saved: screenshots/expect-failure
[2025-08-24T12:28:50.782Z] [ERROR] Test failed: Expected pattern not found: ‚úì Build completed
[2025-08-24T12:28:50.784Z] [INFO] Screenshot saved: screenshots/test-failure
[2025-08-24T12:28:50.784Z] [INFO] Cleaning up PTY process
[2025-08-24T12:28:50.785Z] [INFO] Replay saved: logs/replay-1756038530784.json
